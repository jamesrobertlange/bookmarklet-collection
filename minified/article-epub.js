javascript:(function()%7Bif(typeof%20JSZip%3D%3D%3D'undefined')%7Bconst%20script%3Ddocument.createElement('script')%3Bscript.src%3D'https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fjszip%2F3.10.1%2Fjszip.min.js'%3Bscript.onload%3Dfunction()%7BcreateEpub()%7D%3Bdocument.head.appendChild(script)%7Delse%7BcreateEpub()%7Dfunction%20createEpub()%7Bconst%20title%3Ddocument.querySelector('h1')%3F.textContent%7C%7Cdocument.title%7C%7C'Untitled'%3Bconst%20author%3Ddocument.querySelector('meta%5Bname%3D%22author%22%5D')%3F.content%7C%7C'Unknown%20Author'%3Blet%20contentElement%3Ddocument.querySelector('article')%7C%7Cdocument.querySelector('main')%7C%7Cdocument.querySelector('.post-content')%7C%7Cdocument.querySelector('.entry-content')%7C%7Cdocument.body%3Blet%20content%3DcontentElement.cloneNode(true)%3Bconst%20unwanted%3Dcontent.querySelectorAll('nav%2C%20.nav%2C%20header%2C%20footer%2C%20.advertisement%2C%20script%2C%20style')%3Bunwanted.forEach(el%3D%3Eel.remove())%3Blet%20htmlContent%3Dcontent.innerHTML%3Blet%20tocHtml%3D''%3Bconst%20tocElement%3Ddocument.querySelector('.toc%2C%20%23toc%2C%20nav.toc')%3Bif(tocElement)%7BtocHtml%3DtocElement.innerHTML%7Dconst%20zip%3Dnew%20JSZip()%3Bzip.file('mimetype'%2C'application%2Fepub%2Bzip'%2C%7Bcompression%3A'STORE'%7D)%3Bconst%20containerXml%3D%60%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Ccontainer%20version%3D%221.0%22%20xmlns%3D%22urn%3Aoasis%3Anames%3Atc%3Aopendocument%3Axmlns%3Acontainer%22%3E%0A%20%20%20%20%3Crootfiles%3E%0A%20%20%20%20%20%20%20%20%3Crootfile%20full-path%3D%22OEBPS%2Fcontent.opf%22%20media-type%3D%22application%2Foebps-package%2Bxml%22%2F%3E%0A%20%20%20%20%3C%2Frootfiles%3E%0A%3C%2Fcontainer%3E%60%3Bzip.folder('META-INF').file('container.xml'%2CcontainerXml)%3Bconst%20uuid%3D'urn%3Auuid%3A'%2BgenerateUUID()%3Bconst%20contentOpf%3D%60%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cpackage%20xmlns%3D%22http%3A%2F%2Fwww.idpf.org%2F2007%2Fopf%22%20version%3D%223.0%22%20unique-identifier%3D%22uuid_id%22%3E%0A%20%20%20%20%3Cmetadata%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%3E%0A%20%20%20%20%20%20%20%20%3Cdc%3Aidentifier%20id%3D%22uuid_id%22%3E%24%7Buuid%7D%3C%2Fdc%3Aidentifier%3E%0A%20%20%20%20%20%20%20%20%3Cdc%3Atitle%3E%24%7BescapeXml(title)%7D%3C%2Fdc%3Atitle%3E%0A%20%20%20%20%20%20%20%20%3Cdc%3Acreator%3E%24%7BescapeXml(author)%7D%3C%2Fdc%3Acreator%3E%0A%20%20%20%20%20%20%20%20%3Cdc%3Alanguage%3Een%3C%2Fdc%3Alanguage%3E%0A%20%20%20%20%20%20%20%20%3Cmeta%20property%3D%22dcterms%3Amodified%22%3E%24%7Bnew%20Date().toISOString().split('.')%5B0%5D%7DZ%3C%2Fmeta%3E%0A%20%20%20%20%3C%2Fmetadata%3E%0A%20%20%20%20%3Cmanifest%3E%0A%20%20%20%20%20%20%20%20%3Citem%20id%3D%22ncx%22%20href%3D%22toc.ncx%22%20media-type%3D%22application%2Fx-dtbncx%2Bxml%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Citem%20id%3D%22nav%22%20href%3D%22nav.xhtml%22%20media-type%3D%22application%2Fxhtml%2Bxml%22%20properties%3D%22nav%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Citem%20id%3D%22content%22%20href%3D%22content.xhtml%22%20media-type%3D%22application%2Fxhtml%2Bxml%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Citem%20id%3D%22stylesheet%22%20href%3D%22stylesheet.css%22%20media-type%3D%22text%2Fcss%22%2F%3E%0A%20%20%20%20%3C%2Fmanifest%3E%0A%20%20%20%20%3Cspine%20toc%3D%22ncx%22%3E%0A%20%20%20%20%20%20%20%20%3Citemref%20idref%3D%22content%22%2F%3E%0A%20%20%20%20%3C%2Fspine%3E%0A%3C%2Fpackage%3E%60%3Bzip.folder('OEBPS').file('content.opf'%2CcontentOpf)%3Bconst%20tocNcx%3D%60%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cncx%20xmlns%3D%22http%3A%2F%2Fwww.daisy.org%2Fz3986%2F2005%2Fncx%2F%22%20version%3D%222005-1%22%3E%0A%20%20%20%20%3Chead%3E%0A%20%20%20%20%20%20%20%20%3Cmeta%20name%3D%22dtb%3Auid%22%20content%3D%22%24%7Buuid%7D%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Cmeta%20name%3D%22dtb%3Adepth%22%20content%3D%221%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Cmeta%20name%3D%22dtb%3AtotalPageCount%22%20content%3D%220%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Cmeta%20name%3D%22dtb%3AmaxPageNumber%22%20content%3D%220%22%2F%3E%0A%20%20%20%20%3C%2Fhead%3E%0A%20%20%20%20%3CdocTitle%3E%0A%20%20%20%20%20%20%20%20%3Ctext%3E%24%7BescapeXml(title)%7D%3C%2Ftext%3E%0A%20%20%20%20%3C%2FdocTitle%3E%0A%20%20%20%20%3CnavMap%3E%0A%20%20%20%20%20%20%20%20%3CnavPoint%20id%3D%22content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CnavLabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctext%3EContent%3C%2Ftext%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2FnavLabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ccontent%20src%3D%22content.xhtml%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C%2FnavPoint%3E%0A%20%20%20%20%3C%2FnavMap%3E%0A%3C%2Fncx%3E%60%3Bzip.folder('OEBPS').file('toc.ncx'%2CtocNcx)%3Bconst%20navXhtml%3D%60%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3C!DOCTYPE%20html%3E%0A%3Chtml%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20xmlns%3Aepub%3D%22http%3A%2F%2Fwww.idpf.org%2F2007%2Fops%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Ctitle%3ENavigation%3C%2Ftitle%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20type%3D%22text%2Fcss%22%20href%3D%22stylesheet.css%22%2F%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%20%20%3Cnav%20epub%3Atype%3D%22toc%22%20id%3D%22toc%22%3E%0A%20%20%20%20%20%20%20%20%3Ch1%3ETable%20of%20Contents%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%24%7BtocHtml%7C%7C'%3Col%3E%3Cli%3E%3Ca%20href%3D%22content.xhtml%22%3EContent%3C%2Fa%3E%3C%2Fli%3E%3C%2Fol%3E'%7D%0A%20%20%20%20%3C%2Fnav%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%60%3Bzip.folder('OEBPS').file('nav.xhtml'%2CnavXhtml)%3Bconst%20contentXhtml%3D%60%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3C!DOCTYPE%20html%3E%0A%3Chtml%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Ctitle%3E%24%7BescapeXml(title)%7D%3C%2Ftitle%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20type%3D%22text%2Fcss%22%20href%3D%22stylesheet.css%22%2F%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%20%20%3Ch1%3E%24%7BescapeXml(title)%7D%3C%2Fh1%3E%0A%20%20%20%20%24%7BhtmlContent%7D%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%60%3Bzip.folder('OEBPS').file('content.xhtml'%2CcontentXhtml)%3Bconst%20stylesheet%3D%60%0Abody%20%7B%0A%20%20%20%20font-family%3A%20Georgia%2C%20serif%3B%0A%20%20%20%20line-height%3A%201.6%3B%0A%20%20%20%20margin%3A%202em%3B%0A%7D%0A%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0A%20%20%20%20font-family%3A%20Arial%2C%20sans-serif%3B%0A%20%20%20%20line-height%3A%201.2%3B%0A%20%20%20%20margin-top%3A%201.5em%3B%0A%20%20%20%20margin-bottom%3A%200.5em%3B%0A%7D%0A%0Ah1%20%7B%20font-size%3A%202em%3B%20%7D%0Ah2%20%7B%20font-size%3A%201.5em%3B%20%7D%0Ah3%20%7B%20font-size%3A%201.2em%3B%20%7D%0A%0Ap%20%7B%0A%20%20%20%20margin%3A%201em%200%3B%0A%20%20%20%20text-align%3A%20justify%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20%20%20margin%3A%201em%202em%3B%0A%20%20%20%20padding-left%3A%201em%3B%0A%20%20%20%20border-left%3A%203px%20solid%20%23ccc%3B%0A%20%20%20%20font-style%3A%20italic%3B%0A%7D%0A%0Apre%2C%20code%20%7B%0A%20%20%20%20font-family%3A%20%22Courier%20New%22%2C%20monospace%3B%0A%20%20%20%20background-color%3A%20%23f5f5f5%3B%0A%7D%0A%0Apre%20%7B%0A%20%20%20%20padding%3A%201em%3B%0A%20%20%20%20overflow-x%3A%20auto%3B%0A%7D%0A%0A.footnotes%20%7B%0A%20%20%20%20margin-top%3A%202em%3B%0A%20%20%20%20padding-top%3A%201em%3B%0A%20%20%20%20border-top%3A%201px%20solid%20%23ccc%3B%0A%20%20%20%20font-size%3A%200.9em%3B%0A%7D%0A%0A.footnote-ref%20%7B%0A%20%20%20%20vertical-align%3A%20super%3B%0A%20%20%20%20font-size%3A%200.8em%3B%0A%7D%0A%0Aaside%20%7B%0A%20%20%20%20background-color%3A%20%23f9f9f9%3B%0A%20%20%20%20border-left%3A%204px%20solid%20%23ddd%3B%0A%20%20%20%20padding%3A%201em%3B%0A%20%20%20%20margin%3A%201em%200%3B%0A%7D%0A%60%3Bzip.folder('OEBPS').file('stylesheet.css'%2Cstylesheet)%3Bzip.generateAsync(%7Btype%3A'blob'%2CmimeType%3A'application%2Fepub%2Bzip'%2Ccompression%3A'DEFLATE'%2CcompressionOptions%3A%7Blevel%3A9%7D%7D).then(function(blob)%7Bconst%20url%3DURL.createObjectURL(blob)%3Bconst%20a%3Ddocument.createElement('a')%3Ba.href%3Durl%3Ba.download%3DsanitizeFilename(title)%2B'.epub'%3Bdocument.body.appendChild(a)%3Ba.click()%3Bdocument.body.removeChild(a)%3BURL.revokeObjectURL(url)%3Balert('EPUB%20created%3A%20'%2Ba.download)%7D).catch(function(error)%7Balert('Error%20creating%20EPUB%3A%20'%2Berror)%7D)%7Dfunction%20generateUUID()%7Breturn'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(%2F%5Bxy%5D%2Fg%2Cfunction(c)%7Bconst%20r%3DMath.random()*16%7C0%3Bconst%20v%3Dc%3D%3D'x'%3Fr%3A(r%260x3%7C0x8)%3Breturn%20v.toString(16)%7D)%7Dfunction%20escapeXml(str)%7Breturn%20String(str).replace(%2F%26%2Fg%2C'%26amp%3B').replace(%2F%3C%2Fg%2C'%26lt%3B').replace(%2F%3E%2Fg%2C'%26gt%3B').replace(%2F%22%2Fg%2C'%26quot%3B').replace(%2F'%2Fg%2C'%26apos%3B')%7Dfunction%20sanitizeFilename(str)%7Breturn%20str.replace(%2F%5B%5Ea-z0-9%5D%2Fgi%2C'_').toLowerCase().substring(0%2C50)%7D%7D)()%3B