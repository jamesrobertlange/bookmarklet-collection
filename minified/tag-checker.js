(function(){javascript:(function(){function e(){let e=[],t=document.querySelector('script[src*="activation.js"]'),n=!!window.google_tag_manager,a=!!window.utag;e.push(`Botify script tag present: ${!!t}`),e.push(`Google Tag Manager present: ${n}`),e.push(`Tealium present: ${a}`);let o=["Botify","BotifyActivation","_botify"];o.forEach(t=>{e.push(`Global object "${t}" present: ${!!window[t]}`)});let r=performance.getEntriesByType("resource").filter(e=>e.name.includes("activation.js"));e.push(`Botify script loaded: ${r.length>0}`);let i=document.querySelectorAll("[data-botify]");e.push(`Elements with Botify data attributes: ${i.length}`);let s=Array.from(document.scripts).map(e=>({src:e.src,async:e.async,defer:e.defer,type:e.type})),l=performance.getEntriesByType("resource").filter(e=>e.initiatorType==="script"),c=l.filter(e=>e.name.includes("activation.js")||e.name.toLowerCase().includes("botify")),d=new Date,u=`${d.getFullYear()}${String(d.getMonth()+1).padStart(2,"0")}${String(d.getDate()).padStart(2,"0")}`,p=window.location.hostname+window.location.pathname.replace(/[^a-z0-9]/gi,"-"),f={results:e,allScripts:s,networkScripts:l,botifyScripts:c},m=JSON.stringify(f,null,2),h=new Blob([m],{type:"application/json"}),y=document.createElement("a");y.href=URL.createObjectURL(h),y.download=`tag-audit-${p}-${u}.json`,y.click(),URL.revokeObjectURL(y.href);let w="Name,Start Time,Duration,Initiator Type,Delivery Type,Next Hop Protocol,Render Blocking Status,Worker Start,Redirect Start,Redirect End,Fetch Start,Domain Lookup Start,Domain Lookup End,Connect Start,Secure Connection Start,Connect End,Request Start,Response Start,First Interim Response Start,Response End,Transfer Size,Encoded Body Size,Decoded Body Size,Response Status\n"+c.map(e=>`"${e.name}",${e.startTime},${e.duration},"${e.initiatorType}","${e.deliveryType}","${e.nextHopProtocol}","${e.renderBlockingStatus}",${e.workerStart},${e.redirectStart},${e.redirectEnd},${e.fetchStart},${e.domainLookupStart},${e.domainLookupEnd},${e.connectStart},${e.secureConnectionStart},${e.connectEnd},${e.requestStart},${e.responseStart},${e.firstInterimResponseStart},${e.responseEnd},${e.transferSize},${e.encodedBodySize},${e.decodedBodySize},${e.responseStatus}`).join("\n"),v=new Blob([w],{type:"text/csv"}),S=document.createElement("a");S.href=URL.createObjectURL(v),S.download=`botify-scripts-${p}-${u}.csv`,S.click(),URL.revokeObjectURL(S.href),alert(e.join("\n"))}e();})();})();
